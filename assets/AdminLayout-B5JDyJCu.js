import{_ as h,o as u,c as p,b as e,d as s,e as n,f as c,w as v,r,i as $,F as g}from"./index-JINe9Ytb.js";var k={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payzoom",BASE_URL:"/GDiner/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:w}=k,x={methods:{async logOut(){try{const t=await this.$http.post(`${w}/v2/logout`);document.cookie="myToken=; expires=Thu, 01 Jan 1970 00:00:00 GMT;",this.$swal({icon:"success",title:`${t.data.message}`,didClose:()=>{this.$router.push("/")}})}catch(t){this.$swal({icon:"error",text:`${t.response.data.message}`})}}}},L={class:"bg-secondary"},y={class:"nav-list flex flex-col gap-10 py-8 h-full"},V={class:"mt-auto"};function R(t,o,a,m,l,d){const i=r("RouterLink");return u(),p("nav",L,[e("ul",y,[e("li",null,[s(i,{to:"/admin/products",class:"block px-8 py-4 ml-8 rd-[100vw_0_0_100vw] font-size-8"},{default:n(()=>[c("產品 ")]),_:1})]),e("li",null,[s(i,{to:"/admin/orders",class:"block px-8 py-4 ml-8 rd-[100vw_0_0_100vw] font-size-8"},{default:n(()=>[c("訂單 ")]),_:1})]),e("li",null,[s(i,{to:"/admin/coupons",class:"block px-8 py-4 ml-8 rd-[100vw_0_0_100vw] font-size-8"},{default:n(()=>[c("優惠券 ")]),_:1})]),e("li",V,[s(i,{to:"/",class:"block px-8 py-4 ml-8 font-size-4"},{default:n(()=>[c("回前台 ")]),_:1})]),e("li",null,[e("a",{href:"#",class:"block px-8 ml-8 font-size-4",onClick:o[0]||(o[0]=v((..._)=>d.logOut&&d.logOut(..._),["prevent"]))},"登出")])])])}const E=h(x,[["render",R],["__scopeId","data-v-83cd5682"]]);var T={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payzoom",BASE_URL:"/GDiner/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:b}=T,C={components:{AdminNavbar:E},data(){return{isChecked:!1,isLoading:!1}},methods:{async checkLogin(){var o;this.isLoading=!0;const t=(o=document.cookie.split("; ").find(a=>a.startsWith("myToken=")))==null?void 0:o.split("=")[1];this.$http.defaults.headers.common.Authorization=t;try{(await this.$http.post(`${b}/v2/api/user/check`)).data.success&&(this.isChecked=!0,this.$swal({position:"bottom-end",toast:!0,icon:"success",title:"驗證成功",showConfirmButton:!1,timer:1500}))}catch(a){this.isChecked=!1,this.$swal({title:"請重新登入",icon:"error",text:`${a.response.data.message||"登入錯誤"}`,didClose:()=>{this.$router.push("/login")}})}finally{this.isLoading=!1}}},mounted(){this.checkLogin()}},A={class:"grid grid-cols-[20rem_1fr] gap-2 h-screen"},z={key:0};function D(t,o,a,m,l,d){const i=r("VLoading"),_=r("AdminNavbar"),f=r("RouterView");return u(),p(g,null,[s(i,{active:l.isLoading,"full-page":!0},null,8,["active"]),e("div",A,[s(_),l.isChecked?(u(),p("div",z,[s(f)])):$("",!0)])],64)}const N=h(C,[["render",D]]);export{N as default};
