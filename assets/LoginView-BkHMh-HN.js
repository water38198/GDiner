import{r as u,c as w,b as o,a as s,w as g,F as x,h as E,S as p,f as n,o as y,n as f,A as B}from"./index-ckO0Meki.js";const L={BASE_URL:"/GDiner/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_PATH:"payzoom",VITE_URL:"https://vue3-course-api.hexschool.io"},k={class:"container min-vh-100 content-center py-10"},D={class:"login-container mx-auto border-custom"},R={class:"mb-8 form-floating"},F={class:"mb-8 form-floating"},C={__name:"LoginView",setup(S){const l=u(!1),a=u({username:"",password:""}),{VITE_URL:v}=L,_=B(),b=async()=>{try{l.value=!0;const t=await E.post(`${v}/v2/admin/signin`,a.value),{expired:e,token:r}=t.data;document.cookie=`RGToken = ${r}; expires = ${new Date(e)};path=/; `,p.fire({icon:"success",title:"登入成功",text:"歡迎回來",confirmButtonColor:"#3D081B"}),_.push({name:"admin"})}catch(t){p.fire({icon:"error",title:t.response.data.message,text:"Email 或是密碼錯誤",confirmButtonColor:"#3D081B"})}finally{l.value=!1}};return(t,e)=>{const r=n("VLoading"),m=n("VField"),d=n("ErrorMessage"),V=n("VForm");return y(),w(x,null,[o(r,{active:l.value},null,8,["active"]),s("main",k,[s("div",D,[o(V,{onSubmit:b,class:"p-4"},{default:g(({errors:c})=>[e[4]||(e[4]=s("h1",{class:"mb-8 fw-bold text-center"},"後台登入",-1)),s("div",R,[o(m,{type:"email",id:"email",name:"email",class:f(["form-control border-custom",{"is-invalid":c.email}]),autocomplete:"off",placeholder:"Email address",modelValue:a.value.username,"onUpdate:modelValue":e[0]||(e[0]=i=>a.value.username=i),rules:"required|email"},null,8,["class","modelValue"]),e[2]||(e[2]=s("label",{for:"email"},"Email",-1)),o(d,{name:"email",class:"invalid-feedback"})]),s("div",F,[o(m,{type:"password",id:"password",name:"password",class:f(["form-control border-custom",{"is-invalid":c.password}]),placeholder:"Password",modelValue:a.value.password,"onUpdate:modelValue":e[1]||(e[1]=i=>a.value.password=i),rules:"required"},null,8,["class","modelValue"]),e[3]||(e[3]=s("label",{for:"password",class:""},"Password",-1)),o(d,{name:"password",class:"invalid-feedback"})]),e[5]||(e[5]=s("div",{class:"text-center"},[s("button",{type:"submit",class:"btn btn-primary btn-lg"},"登入")],-1))]),_:1})])])],64)}}};export{C as default};
