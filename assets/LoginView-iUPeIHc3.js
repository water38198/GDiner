import{a as m,r as l,f,i as _,l as v,g as e,p as u,v as d,q as w,F as h,S as n,B as g,e as x}from"./index-BE6KWW_P.js";import{L as b}from"./index-58APw_xi.js";var y={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payzoom",BASE_URL:"/GDiner/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const E={class:"container"},V={action:"",ref:"loginForm",class:"max-w-100 mx-auto pt-20"},k=e("h1",{class:"text-center font-size-12 mb-8 font-medium"},"登入",-1),L={class:"custom-input-group mb-4"},B=e("label",{for:"email"},"Email address",-1),D={class:"custom-input-group mb-4 position-relative"},R=e("label",{for:"password"},"Password",-1),P={__name:"LoginView",setup(T){const{VITE_URL:c}=y,p=m(),s=l({username:"",password:""}),i=l(!1);function r(){if(s.value.username===""||s.value.password===""){n.fire({icon:"warning",title:"請正確填寫資訊"});return}i.value=!0,g.post(`${c}/v2/admin/signin`,s.value).then(o=>{const{expired:t,token:a}=o.data;document.cookie=`myToken = ${a}; expires = ${new Date(t)} `,n.fire({showConfirmButton:!1,icon:"success",title:"登入成功",timer:1e3,didClose:()=>{p.replace("/admin")}})}).catch(o=>{n.fire({title:"登入失敗",icon:"error",text:`${(o==null?void 0:o.response.data.error.message)||""}`})}).finally(()=>{i.value=!1})}return(o,t)=>(x(),f(h,null,[_(v(b),{active:i.value,"full-page":!0},null,8,["active"]),e("main",null,[e("div",E,[e("form",V,[k,e("div",L,[u(e("input",{type:"email",id:"email",placeholder:"Email address","onUpdate:modelValue":t[0]||(t[0]=a=>s.value.username=a)},null,512),[[d,s.value.username]]),B]),e("div",D,[u(e("input",{type:"password",id:"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=a=>s.value.password=a),onKeyup:w(r,["enter"])},null,544),[[d,s.value.password]]),R]),e("button",{type:"button",onClick:r,class:"block w-100% text-white bg-primary hover:bg-primary-light border-0 rd-3 px-4 py-2 font-size-5 cursor-pointer"},"登入")],512)])])],64))}};export{P as default};
