import{_ as h,c as f,d as a,b as e,w,F as V,r as n,o as g,n as u,l as b}from"./index-Cd9JHZzw.js";var v={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payzoom",BASE_URL:"/GDiner/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:y}=v,x={data(){return{user:{username:"",password:""},isLoading:!1}},methods:{async handleLogin(){if(!this.user.username||!this.user.password){this.$swal({icon:"warning",title:"請正確填寫資訊"});return}this.isLoading=!0;try{const s=await this.$http.post(`${y}/v2/admin/signin`,this.user),{expired:o,token:r}=s.data;document.cookie=`myToken = ${r}; expires = ${new Date(o)};path=/; `,this.$swal({showConfirmButton:!1,icon:"success",title:"登入成功",timer:1e3,didClose:()=>{this.$router.replace("/admin/products")}})}catch(s){this.$swal({title:"登入失敗",icon:"error",text:`${(s==null?void 0:s.response.data.error.message)||"發生錯誤"}`})}finally{this.isLoading=!1}}},mounted(){document.cookie="myToken=; expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;"}},L={class:"container"},E={class:"row"},k=e("h1",{class:"text-center font-size-12 mb-8 font-medium"},"後台登入",-1),T={class:"form-floating mb-4"},F=e("label",{for:"email"},"Email",-1),$={class:"form-floating mb-4"},B=e("label",{for:"password",class:""},"Password",-1),C=e("div",{class:"text-center"},[e("button",{type:"submit",class:"btn btn-primary px-4 py-2 fs-5"},"登入")],-1);function D(s,o,r,R,t,l){const p=n("VLoading"),d=n("VField"),c=n("ErrorMessage"),_=n("VForm");return g(),f(V,null,[a(p,{active:t.isLoading},null,8,["active"]),e("main",null,[e("div",L,[e("div",E,[a(_,{class:"col-10 col-md-8 mx-auto pt-20",onSubmit:l.handleLogin},{default:w(({errors:m})=>[k,e("div",T,[a(d,{type:"email",id:"email",name:"email",class:u(["form-control custom-border",{"is-invalid":m.email}]),autocomplete:"off",placeholder:"Email address",modelValue:t.user.username,"onUpdate:modelValue":o[0]||(o[0]=i=>t.user.username=i),rules:"required|email"},null,8,["class","modelValue"]),F,a(c,{name:"email",class:"invalid-feedback ps-3"})]),e("div",$,[a(d,{type:"password",id:"password",name:"password",class:u(["form-control custom-border",{"is-invalid":m.password}]),placeholder:"Password",modelValue:t.user.password,"onUpdate:modelValue":o[1]||(o[1]=i=>t.user.password=i),onKeyup:b(l.handleLogin,["enter"]),rules:"required"},null,8,["class","modelValue","onKeyup"]),B,a(c,{name:"password",class:"invalid-feedback ps-3"})]),C]),_:1},8,["onSubmit"])])])])],64)}const U=h(x,[["render",D]]);export{U as default};
