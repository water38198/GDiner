import{_ as E,r as c,x as h,y as B,c as a,b as r,a as l,w as M,t as e,F,g as L,q as O,f as i,o as d,n as R,z as S,A as k,h as C,S as b}from"./index-ckO0Meki.js";import{u as I}from"./index-DA4BbhiV.js";const T={BASE_URL:"/GDiner/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_PATH:"payzoom",VITE_URL:"https://vue3-course-api.hexschool.io"},q={class:"container position-relative min-vh-75 py-8"},U={class:"d-flex align-items-start gap-4 mb-8 w-md-75"},$={class:"form-floating"},A={key:0,class:"row gy-8"},Y={class:"col-12 col-md-6"},z={class:"border-custom h-100"},N={class:"list-unstyled d-flex flex-column gap-4 p-4"},P={class:"col-12 col-md-6"},G={class:"border-custom"},H={class:"list-unstyled d-flex flex-column gap-4 p-4"},j={class:"col-12"},J={class:"border-custom pb-4"},K={class:"mb-0 table align-middle table-borderless"},Q={class:"border-top border-bottom"},W=["src","alt"],X={class:"fs-5"},Z={__name:"OrderView",setup(ll){const u=c(!1),t=c({}),m=c(""),f=S(),_=async v=>{const{VITE_URL:s,VITE_PATH:p}=T;u.value=!0;try{const n=await C.get(`${s}/v2/api/${p}/order/${v}`);if(console.log(n.data),n.data.order===null){b.fire({icon:"error",title:"找不到訂單",text:"請確認訂單編號是否正確",confirmButtonColor:"#3D081B"});return}else t.value=n.data.order}catch(n){console.error(n),b.fire({icon:"error",title:"抱歉，出了點問題",text:"請稍後再試，並重新整理頁面",confirmButtonColor:"#3D081B"})}finally{u.value=!1}};h(()=>f.query.id,()=>{_(f.query.id)});const g=k(),y=()=>{g.push(`/order?id=${m.value}`)},x=B(()=>I(t.value.create_at*1e3,"YYYY-MM-DD"));return(v,s)=>{const p=i("VLoading"),n=i("VField"),V=i("ErrorMessage"),w=i("VForm");return d(),a("div",q,[r(p,{active:u.value,"is-full-page":!1},null,8,["active"]),s[15]||(s[15]=l("h2",{class:"fw-bold"},"訂單查詢",-1)),l("div",U,[r(w,{id:"form",onSubmit:y,class:"flex-fill"},{default:M(({errors:o})=>[l("div",$,[r(n,{type:"text",id:"訂單編號",name:"訂單編號",placeholder:"訂單編號",rules:"required",class:R(["form-control border-custom",{"is-invalid":o.訂單編號}]),modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=D=>m.value=D),modelModifiers:{trim:!0},autocomplete:"off"},null,8,["class","modelValue"]),s[1]||(s[1]=l("label",{for:"訂單編號"},"訂單編號",-1)),r(V,{name:"訂單編號",class:"invalid-feedback"})])]),_:1}),s[2]||(s[2]=l("div",null,[l("button",{type:"submit",form:"form",class:"btn btn-lg btn-primary text-nowrap"},"查詢")],-1))]),Object.keys(t.value).length>0?(d(),a("div",A,[l("div",Y,[l("div",z,[s[6]||(s[6]=l("h3",{class:"bg-primary text-secondary p-2 text-center"},"訂單資訊",-1)),l("ul",N,[l("li",null,[s[3]||(s[3]=l("span",{class:"me-4 fw-bold"},"號碼：",-1)),l("span",null,e(t.value.id),1)]),l("li",null,[s[4]||(s[4]=l("span",{class:"me-4 fw-bold"},"時間：",-1)),l("span",null,e(x.value),1)]),l("li",null,[s[5]||(s[5]=l("span",{class:"fw-bold"},"留言：",-1)),l("span",null,e(t.value.message),1)])])])]),l("div",P,[l("div",G,[s[11]||(s[11]=l("h3",{class:"bg-primary text-secondary p-2 text-center"},"買家資訊",-1)),l("ul",H,[l("li",null,[s[7]||(s[7]=l("span",{class:"me-4 fw-bold"},"姓名：",-1)),l("span",null,e(t.value.user.name),1)]),l("li",null,[s[8]||(s[8]=l("span",{class:"me-4 fw-bold"},"信箱：",-1)),l("span",null,e(t.value.user.email),1)]),l("li",null,[s[9]||(s[9]=l("span",{class:"me-4 fw-bold"},"地址：",-1)),l("span",null,e(t.value.user.address),1)]),l("li",null,[s[10]||(s[10]=l("span",{class:"me-4 fw-bold"},"電話：",-1)),l("span",null,e(t.value.user.tel),1)])])])]),l("div",j,[l("div",J,[s[14]||(s[14]=l("h3",{class:"bg-primary text-secondary p-2 text-center"},"料理資訊",-1)),l("table",K,[s[13]||(s[13]=l("thead",null,[l("tr",null,[l("th",null,"圖片"),l("th",null,"名稱"),l("th",null,"數量"),l("th",null,"小計")])],-1)),l("tbody",Q,[(d(!0),a(F,null,L(t.value.products,o=>(d(),a("tr",{key:o.id},[l("td",null,[l("img",{src:o.product.imageUrl,alt:`${o.product.title}的照片`},null,8,W)]),l("td",null,e(o.product.title),1),l("td",null,e(o.qty),1),l("td",null,e(Math.floor(o.final_total)),1)]))),128))]),l("tfoot",null,[l("tr",X,[s[12]||(s[12]=l("td",{colspan:"3",class:"text-end"},"總計：",-1)),l("td",null,e(Math.floor(t.value.total)),1)])])])])])])):O("",!0)])}}},el=E(Z,[["__scopeId","data-v-0bee8b57"]]);export{el as default};
