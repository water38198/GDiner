import{_ as u,c as p,d as c,b as e,g as a,v as l,h as m,F as h,r as _,o as f}from"./index-JINe9Ytb.js";var g={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payzoom",BASE_URL:"/GDiner/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:w}=g,v={data(){return{user:{username:"",password:""},isLoading:!1}},methods:{async login(){if(this.user.username===""||this.user.password===""){this.$swal({icon:"warning",title:"請正確填寫資訊"});return}this.isLoading=!0;try{const o=await this.$http.post(`${w}/v2/admin/signin`,this.user),{expired:s,token:n}=o.data;document.cookie=`myToken = ${n}; expires = ${new Date(s)} `,this.$swal({showConfirmButton:!1,icon:"success",title:"登入成功",timer:1e3,didClose:()=>{this.$router.replace("/admin/products")}})}catch(o){this.$swal({title:"登入失敗",icon:"error",text:`${(o==null?void 0:o.response.data.error.message)||""}`})}finally{this.isLoading=!1}}}},x={class:"container"},y={action:"",ref:"loginForm",class:"max-w-100 mx-auto pt-20"},b=e("h1",{class:"text-center font-size-12 mb-8 font-medium"},"登入",-1),V={class:"custom-input-group mb-4"},L=e("label",{for:"email"},"Email address",-1),E={class:"custom-input-group mb-4 position-relative"},k=e("label",{for:"password"},"Password",-1);function D(o,s,n,T,i,r){const d=_("VLoading");return f(),p(h,null,[c(d,{active:i.isLoading,"full-page":!0},null,8,["active"]),e("main",null,[e("div",x,[e("form",y,[b,e("div",V,[a(e("input",{type:"email",id:"email",placeholder:"Email address","onUpdate:modelValue":s[0]||(s[0]=t=>i.user.username=t)},null,512),[[l,i.user.username]]),L]),e("div",E,[a(e("input",{type:"password",id:"password",placeholder:"Password","onUpdate:modelValue":s[1]||(s[1]=t=>i.user.password=t),onKeyup:s[2]||(s[2]=m((...t)=>r.login&&r.login(...t),["enter"]))},null,544),[[l,i.user.password]]),k]),e("button",{type:"button",onClick:s[3]||(s[3]=(...t)=>r.login&&r.login(...t)),class:"block w-100% text-white bg-primary hover:bg-primary-light border-0 rd-3 px-4 py-2 font-size-5 cursor-pointer"},"登入")],512)])])],64)}const R=u(v,[["render",D]]);export{R as default};
