import{h}from"./moment-Cl4UOzQZ.js";import{_ as p,c as n,d as u,b as s,g as m,v as b,t as o,F as c,l as g,i as f,r as v,o as d,p as y,k as w}from"./index-JINe9Ytb.js";var x={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payzoom",BASE_URL:"/GDiner/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:I,VITE_PATH:k}=x,L={data(){return{isLoading:!1,orderId:"",order:null}},methods:{async getOrder(i){this.isLoading=!0;try{const r=await this.$http.get(`${I}/v2/api/${k}/order/${i}`);r.data.order===null?this.$swal({title:"號碼錯誤",icon:"error",text:"您的訂單號碼可能輸入錯誤，請嘗試重新輸入"}):this.order=r.data.order}catch(r){this.$swal({title:"錯誤發生",icon:"error",text:`${r.response.data.message}，請嘗試重新整理，如果此狀況持續發生，請聯絡我們`})}finally{this.isLoading=!1}},getTime(i){return h(i).format("YYYY-MM-DD")}},mounted(){this.$route.query.id&&(this.orderId=this.$route.query.id,this.getOrder(this.orderId))}},t=i=>(y("data-v-a12dd56f"),i=i(),w(),i),V={class:"container px-4 md:px-12.5"},D=t(()=>s("h2",{class:"text-center font-size-12 mb-10"},"訂單查詢",-1)),E={class:"mb-10"},T={class:"custom-input-group w-50% mx-a"},S=t(()=>s("label",{for:"orderId"},"訂單號碼",-1)),z={key:0,class:"grid md:grid-cols-2 gap-10 mb-10"},M={class:"col-span-2 md:col-span-1"},O=t(()=>s("h3",{class:"font-size-8 mb-4"},"訂單資訊",-1)),R={class:"grid gap-4"},U=t(()=>s("span",{class:"inline-block w-25"},"訂單號碼：",-1)),B=t(()=>s("span",{class:"inline-block w-25"},"下單時間：",-1)),Y=t(()=>s("span",{class:"inline-block w-25"},"留言：",-1)),q={class:"col-span-2 md:col-span-1"},A=t(()=>s("h3",{class:"font-size-8 mb-4"},"買家資訊",-1)),C={class:"grid gap-4"},N=t(()=>s("span",{class:"inline-block w-25"},"姓名：",-1)),P=t(()=>s("span",{class:"inline-block w-25"},"Email：",-1)),F=t(()=>s("span",{class:"inline-block w-25"},"地址：",-1)),H=t(()=>s("span",{class:"inline-block w-25"},"電話：",-1)),G={class:"col-span-2"},j=t(()=>s("h3",{class:"font-size-8 mb-4"},"訂購的料理",-1)),J={class:"w-full"},K=t(()=>s("thead",{class:"border-b-1 border-solid border-primary-veryLight"},[s("tr",{class:"opacity-60 text-left"},[s("th",{class:"w-30 md:w-35"},"圖片"),s("th",null,"名稱"),s("th",null,"數量"),s("th",{class:"text-right"},"小計")])],-1)),Q={class:"border-b-1 border-solid border-primary-veryLight"},W={class:"w-100% h-30 md:w-25"},X=["src","alt"],Z={class:"text-right"},$={colspan:"4",class:"text-right font-size-6"};function ss(i,r,es,ts,e,a){const _=v("VLoading");return d(),n(c,null,[u(_,{active:e.isLoading},null,8,["active"]),s("div",V,[D,s("div",E,[s("div",T,[m(s("input",{type:"text",id:"orderId",placeholder:"請輸入訂單ID","onUpdate:modelValue":r[0]||(r[0]=l=>e.orderId=l)},null,512),[[b,e.orderId,void 0,{trim:!0}]]),S,s("button",{class:"absolute h-100% right-0 top-1/2 translate-y--1/2 block px-6 border-l-3 border-solid border-primary rd-tr-4 rd-br-4 hover-bg-primary hover-text-secondary",onClick:r[1]||(r[1]=l=>a.getOrder(e.orderId))},"查詢")])]),e.order!==null?(d(),n("div",z,[s("div",M,[O,s("ul",R,[s("li",null,[U,s("span",null,o(e.order.id),1)]),s("li",null,[B,s("span",null,o(a.getTime(e.order.create_at*1e3)),1)]),s("li",null,[Y,s("span",null,o(e.order.message),1)])])]),s("div",q,[A,s("ul",C,[s("li",null,[N,s("span",null,o(e.order.user.name),1)]),s("li",null,[P,s("span",null,o(e.order.user.email),1)]),s("li",null,[F,s("span",null,o(e.order.user.address),1)]),s("li",null,[H,s("span",null,o(e.order.user.tel),1)])])]),s("div",G,[j,s("table",J,[K,s("tbody",Q,[(d(!0),n(c,null,g(e.order.products,l=>(d(),n("tr",{key:l.id},[s("td",null,[s("div",W,[s("img",{src:l.product.imageUrl,alt:`${l.product.title}的照片`,class:"block max-w-25 w-100% h-100% border-2 border-solid border-primary rd-2.5"},null,8,X)])]),s("td",null,o(l.product.title),1),s("td",null,o(l.qty),1),s("td",Z,o(Math.floor(l.final_total)),1)]))),128))]),s("tfoot",null,[s("tr",null,[s("td",$," 總計："+o(Math.floor(e.order.total)),1)])])])])])):f("",!0)])],64)}const ls=p(L,[["render",ss],["__scopeId","data-v-a12dd56f"]]);export{ls as default};
