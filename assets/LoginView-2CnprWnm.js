import{a as v,r as p,f as _,j as h,m as b,g as e,p as c,v as u,H as w,F as x,e as g,x as y,y as V}from"./index-BGcmftwk.js";import{S as i,a as k}from"./sweetalert2.all-BG_37rGc.js";import{L as E}from"./index-CegEb7TS.js";import{_ as L}from"./plugin-vueexport-helper-DlAUqK2U.js";var S={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payzoom",BASE_URL:"/GDiner/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const l=r=>(y("data-v-b821a1a0"),r=r(),V(),r),z={class:"flex justify-center items-center h-screen font-sans"},I={action:"",ref:"loginForm"},D=l(()=>e("h1",{class:"text-center font-size-12 mb-8 font-medium"},"登入",-1)),R={class:"custom-input-group mb-4 position-relative"},T=l(()=>e("label",{for:"email",class:"position-absolute block w-100% top-0 left-0 z-2 p-4 hover:cursor-text"},"Email address",-1)),B={class:"custom-input-group mb-4 position-relative"},U=l(()=>e("label",{for:"password",class:"position-absolute block w-100% top-0 left-0 z-2 p-4 hover:cursor-text"},"Password",-1)),P={__name:"LoginView",setup(r){const{VITE_URL:m}=S,f=v(),o=p({username:"",password:""}),n=p(!1);function d(){if(o.value.username===""||o.value.password===""){i.fire({icon:"warning",title:"請正確填寫資訊"});return}n.value=!0,k.post(`${m}/v2/admin/signin`,o.value).then(s=>{const{expired:t,token:a}=s.data;document.cookie=`myToken = ${a}; expires = ${new Date(t)} `,i.fire({showConfirmButton:!1,icon:"success",title:"登入成功",timer:1e3,didClose:()=>{f.replace("/admin/home")}})}).catch(s=>{i.fire({title:"登入失敗",icon:"error",text:`${(s==null?void 0:s.response.data.error.message)||""}`})}).finally(()=>{n.value=!1})}return(s,t)=>(g(),_(x,null,[h(b(E),{active:n.value,"full-page":!0},null,8,["active"]),e("main",null,[e("div",z,[e("form",I,[D,e("div",R,[c(e("input",{type:"email",id:"email",placeholder:"Email address",class:"font-size-4 px-3 py-4 b-1 border-solid border-#ced4da rd outline-none pointer-events-none","onUpdate:modelValue":t[0]||(t[0]=a=>o.value.username=a)},null,512),[[u,o.value.username]]),T]),e("div",B,[c(e("input",{type:"password",id:"password",placeholder:"Password",class:"font-size-4 px-3 py-4 b-1 border-solid border-#ced4da rd outline-none pointer-events-none","onUpdate:modelValue":t[1]||(t[1]=a=>o.value.password=a),onKeyup:w(d,["enter"])},null,544),[[u,o.value.password]]),U]),e("button",{type:"button",onClick:d,class:"block w-100% text-white bg-primary hover:bg-primary-light border-0 rd px-4 py-2 font-size-5 hover:cursor-pointer"},"登入")],512)])])],64))}},A=L(P,[["__scopeId","data-v-b821a1a0"]]);export{A as default};
