import{s as D,u as $,r as i,o as I,w as L,d as T,f as l,g as e,j as f,m as _,D as E,F as V,z as N,t as n,n as P,k as U,e as c,l as A,x as O,y as q}from"./index-BGcmftwk.js";import{a as M,S as y}from"./sweetalert2.all-BG_37rGc.js";import{L as F}from"./index-CegEb7TS.js";import{u as G}from"./cartStore-WYb4YDzs.js";import{R as H}from"./RandomProduct-BqahwbXt.js";import{_ as j}from"./plugin-vueexport-helper-DlAUqK2U.js";var Q={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payzoom",BASE_URL:"/GDiner/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const d=u=>(O("data-v-599e30b2"),u=u(),q(),u),J={class:"py-10"},K={class:"container px-4 md:px-12.5"},W={class:"grid md:grid-cols-[40%_60%] gap-10 mb-16"},X={class:"mb-8"},Y={class:"flex flex-wrap gap-2"},Z={class:"font-size-4 text-info mb-3"},ee={class:"font-size-10 font-serif mb-6"},oe={key:0,class:"mb-6"},te={class:"me-4"},se={class:"text-red font-size-6"},ae={key:1,class:"mb-6"},re={class:"font-size-6"},ne={class:"mb-6"},ie=d(()=>e("label",{class:"block mb-3 font-size-3 text-primary-light",for:"quantity"},"數量",-1)),le={class:"relative grid grid-cols-3 w-40 customBorder rd-3 h-12.5"},ce=d(()=>e("div",{class:"i-ic:round-minus"},null,-1)),de=[ce],ue=["value"],pe=d(()=>e("div",{class:"i-ic:round-plus"},null,-1)),_e=[pe],me={class:"md:max-w-100 w-100% mb-6"},ve={class:"mb-6"},fe=d(()=>e("h3",{class:"mb-3 font-size-5"},"商品介紹：",-1)),ge={class:"lh-normal"},he=d(()=>e("h3",{class:"mb-3 font-size-5"},"商品內容：",-1)),be=["src"],xe={__name:"SingleProduct",setup(u){const{VITE_URL:k,VITE_PATH:w}=Q,g=G(),{isLoading:C}=D(g),{addCart:h}=g,m=$(),b=i(m.params.id),o=i({}),a=i(1),p=i([]),v=i();function x(){p.value.push("product"),M.get(`${k}/v2/api/${w}/product/${b.value}`).then(t=>{o.value=t.data.product}).catch(t=>{y.fire({title:"錯誤發生",icon:"error",text:`${t.response.data.message}，請嘗試重新整理，如果此狀況持續發生，請聯絡我們`,confirmButtonColor:"#3D081B"})}).finally(()=>{p.value.splice(p.value.indexOf("product"),1)})}function z(t){t.target.value<1||typeof+t.target.value!="number"?(y.fire({title:"數量錯誤請重新輸入",icon:"error",timer:3e3}),t.target.value=a.value):a.value=t.target.value}function R(){v.value.showModal()}function S(t){t.target.nodeName==="DIALOG"&&v.value.close()}return I(()=>{x()}),L(()=>m.params,()=>{b.value=m.params.id,x()}),(t,s)=>{const B=T("RouterLink");return c(),l("main",J,[e("div",K,[e("div",W,[f(_(F),{active:p.value.includes("product")},null,8,["active"]),e("div",null,[e("div",X,[e("div",{class:"product-image customBorder-xl bg-primary bg-cover bg-center rd-3 overflow-hidden w-100% h-300px lg:h-500px cursor-pointer",style:E({"background-image":`url(${o.value.imageUrl})`}),onClick:R},null,4)]),e("div",Y,[(c(!0),l(V,null,N(o.value.tags,r=>(c(),l("span",{key:r,class:"border-2 border-solid border-primary-200 px-4 py-2 rd-10 text-primary-2"},n(r),1))),128))])]),e("div",null,[e("p",Z,n(o.value.category),1),e("h2",ee,n(o.value.title),1),o.value.origin_price!==o.value.price?(c(),l("div",oe,[e("del",te,"NT$"+n(o.value.origin_price),1),e("span",se,"NT$"+n(o.value.price),1)])):(c(),l("div",ae,[e("span",re," NT$"+n(o.value.price),1)])),e("div",ne,[ie,e("div",le,[e("button",{class:"block bg-transparent border-0 px-4 cursor-pointer font-size-5 fw-900",onClick:s[0]||(s[0]=r=>a.value-1>0?a.value--:"")},de),e("input",{type:"number",name:"",id:"quantity",value:a.value,class:"block bg-transparent border-0 appearance-none outline-0 w-100% text-center",min:"1",onChange:s[1]||(s[1]=r=>z(r))},null,40,ue),e("button",{class:"block bg-transparent border-0 px-4 cursor-pointer font-size-5 fw-900",onClick:s[2]||(s[2]=r=>a.value++)},_e)])]),e("div",me,[e("button",{class:P(["block customBorder rd-10 w-100% bg-transparent mb-4 py-3 cursor-pointer hover:outline-1px hover:outline-solid hover:outline-primary",{"pointer-events-none opacity-75":_(C)}]),onClick:s[3]||(s[3]=r=>_(h)(o.value.id,a.value))},"加入購物車",2),f(B,{to:"/cart",onClick:s[4]||(s[4]=r=>_(h)(o.value.id,a.value,!0)),class:"block w-100% rd-10 bg-info text-secondary text-center py-3 shadow-[0_2px_0_0_#3D081B] hover:shadow-[0_2px_2px_0_#3D081B]"},{default:U(()=>[A(" 立即購買")]),_:1})]),e("div",ve,[fe,e("p",ge,n(o.value.description),1)]),e("div",null,[he,e("p",null,n(o.value.content),1)])])]),f(H,{exclude:[o.value.id]},null,8,["exclude"])]),e("dialog",{ref_key:"imgDialogRef",ref:v,onClick:S,class:"bg-secondary"},[e("img",{src:o.value.imageUrl,alt:"",class:"block max-h-80vh"},null,8,be)],512)])}}},Se=j(xe,[["__scopeId","data-v-599e30b2"]]);export{Se as default};
