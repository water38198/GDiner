import{_ as h,o as u,c as p,b as e,d as s,w as i,e as c,k as v,r,p as k,i as $,g,F as L}from"./index-BP2mD-gl.js";var y={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payzoom",BASE_URL:"/GDiner/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:V}=y,b={methods:{async logOut(){try{const t=await this.$http.post(`${V}/v2/logout`);document.cookie="myToken=; expires=Thu, 01 Jan 1970 00:00:00 GMT;",this.$swal({icon:"success",title:`${t.data.message}`,didClose:()=>{this.$router.push("/")}})}catch(t){this.$swal({icon:"error",text:`${t.response.data.message}`})}}}},w=t=>(k("data-v-f8983c7d"),t=t(),$(),t),R={class:"navbar navbar-expand bg-body-tertiary text-nowrap pb-0"},x={class:"container justify-content-center justify-content-sm-between py-2"},E=w(()=>e("span",{class:"navbar-brand mb-0 fs-1 text-primary d-none d-sm-inline"},"後台",-1)),T={class:"navbar-nav gap-4"},C={class:"nav-item"},I={class:"nav-item"},A={class:"nav-item"},S={class:"nav-item"},D={class:"nav-item"};function N(t,o,a,m,d,l){const n=r("RouterLink");return u(),p("nav",R,[e("div",x,[E,e("ul",T,[e("li",C,[s(n,{to:"/admin/products",class:"nav-link h-100"},{default:i(()=>[c("產品")]),_:1})]),e("li",I,[s(n,{to:"/admin/orders",class:"nav-link"},{default:i(()=>[c("訂單")]),_:1})]),e("li",A,[s(n,{to:"/admin/coupons",class:"nav-link"},{default:i(()=>[c("優惠券")]),_:1})]),e("li",S,[s(n,{to:"/",class:"nav-link"},{default:i(()=>[c("回前台")]),_:1})]),e("li",D,[e("a",{href:"#",class:"nav-link",onClick:o[0]||(o[0]=v((..._)=>l.logOut&&l.logOut(..._),["prevent"]))},"登出")])])])])}const O=h(b,[["render",N],["__scopeId","data-v-f8983c7d"]]);var U={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payzoom",BASE_URL:"/GDiner/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:B}=U,M={components:{AdminNavbar:O},data(){return{isChecked:!1,isLoading:!1}},methods:{async checkLogin(){var o;this.isLoading=!0;const t=(o=document.cookie.split("; ").find(a=>a.startsWith("myToken=")))==null?void 0:o.split("=")[1];this.$http.defaults.headers.common.Authorization=t;try{(await this.$http.post(`${B}/v2/api/user/check`)).data.success&&(this.isChecked=!0,this.$swal({position:"bottom-end",toast:!0,icon:"success",title:"驗證成功",showConfirmButton:!1,timer:1500}))}catch(a){this.isChecked=!1,this.$swal({title:"請重新登入",icon:"error",text:`${a.response.data.message||"登入錯誤"}`,didClose:()=>{this.$router.push("/login")}})}finally{this.isLoading=!1}}},mounted(){this.checkLogin()}},P={key:0,class:"container-md"};function z(t,o,a,m,d,l){const n=r("VLoading"),_=r("AdminNavbar"),f=r("RouterView");return u(),p(L,null,[s(n,{active:d.isLoading},null,8,["active"]),e("div",null,[s(_),d.isChecked?(u(),p("div",P,[s(f)])):g("",!0)])],64)}const j=h(M,[["render",z]]);export{j as default};
