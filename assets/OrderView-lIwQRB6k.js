import{h}from"./moment-Cl4UOzQZ.js";import{_ as m,c as d,d as u,b as s,f as p,v as f,t as o,F as a,j as b,g,r as v,o as i,p as y,i as x}from"./index-Cd9JHZzw.js";var I={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payzoom",BASE_URL:"/GDiner/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:V,VITE_PATH:L}=I,w={data(){return{isLoading:!1,orderId:"",order:null}},methods:{async getOrder(n){this.isLoading=!0;try{const r=await this.$http.get(`${V}/v2/api/${L}/order/${n}`);r.data.order===null?this.$swal({title:"號碼錯誤",icon:"error",text:"您的訂單號碼可能輸入錯誤，請嘗試重新輸入"}):this.order=r.data.order}catch(r){this.$swal({title:"錯誤發生",icon:"error",text:`${r.response.data.message}，請嘗試重新整理，如果此狀況持續發生，請聯絡我們`})}finally{this.isLoading=!1}},getTime(n){return h(n).format("YYYY-MM-DD")}},mounted(){this.$route.query.id&&(this.orderId=this.$route.query.id,this.getOrder(this.orderId))}},e=n=>(y("data-v-344cdfff"),n=n(),x(),n),D={class:"container py-10"},T=e(()=>s("h2",{class:"text-center fs-2 mb-10"},"訂單查詢",-1)),E={class:"mx-auto mb-10 w-md-50"},S={class:"form-floating mb-3"},k=e(()=>s("label",{for:"orderId"},"訂單號碼",-1)),M={class:"text-center"},O={key:0,class:"mb-10"},R={class:"row gy-4"},U={class:"col-md-6"},B={class:"custom-border h-100"},Y=e(()=>s("h3",{class:"fs-3 fs-md-2 lh-lg text-center mb-6 bg-primary text-secondary"},"訂單資訊",-1)),q={class:"list-unstyled px-6"},A={class:"mb-2"},C=e(()=>s("span",{class:"me-4"},"號碼：",-1)),N={class:"mb-2"},P=e(()=>s("span",{class:"me-4"},"時間：",-1)),F={class:"mb-2"},H=e(()=>s("span",{class:"me-4"},"留言：",-1)),j={class:"col-md-6"},z={class:"custom-border h-100"},G=e(()=>s("h3",{class:"fs-3 fs-md-2 lh-lg text-center mb-6 bg-primary text-secondary"},"買家資訊",-1)),J={class:"list-unstyled px-6"},K={class:"mb-2"},Q=e(()=>s("span",{class:"me-4"},"姓名：",-1)),W={class:"mb-2"},X=e(()=>s("span",{class:"me-4"},"信箱：",-1)),Z={class:"mb-2"},$=e(()=>s("span",{class:"me-4"},"地址：",-1)),ss={class:"mb-2"},ts=e(()=>s("span",{class:"me-4"},"電話：",-1)),es={class:"custom-border"},os=e(()=>s("h3",{class:"fs-3 fs-md-2 lh-lg text-center bg-primary text-secondary"},"訂購的料理",-1)),rs={class:"table mb-0"},ls=e(()=>s("thead",null,[s("tr",null,[s("th",{class:"text-center w-25"},"圖片"),s("th",null,"名稱"),s("th",null,"數量"),s("th",null,"小計")])],-1)),ns=["src","alt"],ds={class:"text-center fs-5 my-4"};function is(n,r,cs,as,t,c){const _=v("VLoading");return i(),d(a,null,[u(_,{active:t.isLoading},null,8,["active"]),s("div",D,[T,s("div",E,[s("div",S,[p(s("input",{type:"text",id:"orderId",placeholder:"請輸入訂單ID",class:"form-control bg-secondary custom-border","onUpdate:modelValue":r[0]||(r[0]=l=>t.orderId=l)},null,512),[[f,t.orderId,void 0,{trim:!0}]]),k]),s("div",M,[s("button",{class:"btn btn-primary px-4",onClick:r[1]||(r[1]=l=>c.getOrder(t.orderId))},"查詢")])]),t.order!==null?(i(),d("div",O,[s("div",R,[s("div",U,[s("div",B,[Y,s("ul",q,[s("li",A,[C,s("span",null,o(t.order.id),1)]),s("li",N,[P,s("span",null,o(c.getTime(t.order.create_at*1e3)),1)]),s("li",F,[H,s("span",null,o(t.order.message),1)])])])]),s("div",j,[s("div",z,[G,s("ul",J,[s("li",K,[Q,s("span",null,o(t.order.user.name),1)]),s("li",W,[X,s("span",null,o(t.order.user.email),1)]),s("li",Z,[$,s("span",null,o(t.order.user.address),1)]),s("li",ss,[ts,s("span",null,o(t.order.user.tel),1)])])])]),s("div",null,[s("div",es,[os,s("table",rs,[ls,s("tbody",null,[(i(!0),d(a,null,b(t.order.products,l=>(i(),d("tr",{key:l.id},[s("td",null,[s("img",{src:l.product.imageUrl,alt:`${l.product.title}的照片`,class:"product-image mx-auto"},null,8,ns)]),s("td",null,o(l.product.title),1),s("td",null,o(l.qty),1),s("td",null,o(Math.floor(l.final_total)),1)]))),128))])]),s("p",ds," 總計："+o(Math.floor(t.order.total)),1)])])])])):g("",!0)])],64)}const ms=m(w,[["render",is],["__scopeId","data-v-344cdfff"]]);export{ms as default};
