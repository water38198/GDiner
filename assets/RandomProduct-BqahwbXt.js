import{a as b,S as E}from"./sweetalert2.all-BG_37rGc.js";import{u as w,r as u,o as y,w as I,d as S,e as i,f as d,j as m,m as P,g as s,F as V,z as B,k as T,t as _,i as h,x as D,y as N}from"./index-BGcmftwk.js";import{L as $}from"./index-CegEb7TS.js";import{_ as A}from"./plugin-vueexport-helper-DlAUqK2U.js";var C={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payzoom",BASE_URL:"/GDiner/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const M=a=>(D("data-v-f45c0be5"),a=a(),N(),a),U={key:0,class:"relative"},z=M(()=>s("h3",{class:"font-serif lh-tight font-size-7 mb-10"},"誠心推薦",-1)),O={key:0},F={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},H={class:"card"},j={class:"customBorder-xl rd-3 overflow-hidden mb-4"},G=["src"],q={class:"mb-4 tracking-wider"},J={class:"pb-4"},K={__name:"RandomProduct",props:{exclude:{type:Array,default:()=>[]}},setup(a){const f=w(),{VITE_URL:v,VITE_PATH:g}=C,n=u([]),r=u([]),c=u([]),x=a;function p(){c.value.push("products"),b.get(`${v}/v2/api/${g}/products/all`).then(t=>{r.value=t.data.products,k()}).catch(t=>{E.fire({title:"錯誤發生",icon:"error",text:`${t.response.data.message}，請嘗試重新整理，如果此狀況持續發生，請聯絡我們`,confirmButtonColor:"#3D081B"})}).finally(()=>{c.value.splice(c.value.indexOf("products"),1)})}function R(t){const l=Math.random()*(t+1);return Math.floor(l)}function k(){if(n.value=[],r.value.length===0)return;const t=[...r.value];x.exclude.forEach(e=>{t.filter(L=>L.id!==e)});const l=t.length,o=[];for(;o.length<3;){const e=R(l);o.includes(e)||o.push(e)}o.forEach(e=>n.value.push(t[e]))}return y(()=>{p()}),I(()=>f.params,()=>{p()}),(t,l)=>{const o=S("RouterLink");return r.value.length>0?(i(),d("div",U,[m(P($),{active:c.value.includes("products"),"is-full-page":!1},null,8,["active"]),z,n.value.length>0?(i(),d("div",O,[s("ul",F,[(i(!0),d(V,null,B(n.value,e=>(i(),d("li",{key:e.id},[s("div",H,[m(o,{to:`/product/${e.id}`,class:"block"},{default:T(()=>[s("div",j,[s("img",{src:e.imageUrl,alt:"",class:"block h-150px w-100% sm:h-350px md:h-350px"},null,8,G)]),s("h3",q,_(e.title),1),s("div",J,[s("span",null,"NT$ "+_(e.price),1)])]),_:2},1032,["to"])])]))),128))])])):h("",!0)])):h("",!0)}}},Z=A(K,[["__scopeId","data-v-f45c0be5"]]);export{Z as R};
