import{_ as x,b as h,f as d,g as p,h as e,j as t,k as n,l as c,m as s,I as l,i as R,C as f,S as m,r as g,o as E,p as V,F as y,L as T,R as b}from"./index-p2KhtukQ.js";var w={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payzoom",BASE_URL:"/GDiner/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const L={class:"bg-secondary"},A={class:"nav-list flex flex-col gap-10 py-8 h-full"},z={class:"mt-auto"},D={__name:"AdminNavbar",setup(v){const{VITE_URL:i}=w,r=h();function o(){f.post(`${i}/v2/logOut`).then(()=>{document.cookie="myToken=; expires=; path=/",m.fire({icon:"success",title:"登出成功",didClose:()=>{r.push("/")}})}).catch(a=>{m.fire({icon:"error",text:`${a.response.data.message}`})})}return(a,u)=>(d(),p("nav",L,[e("ul",A,[e("li",null,[t(s(l),{to:"/admin/products",class:"block px-8 py-4 ml-8 rd-[100vw_0_0_100vw] font-size-8"},{default:n(()=>[c("產品 ")]),_:1})]),e("li",null,[t(s(l),{to:"/admin/orders",class:"block px-8 py-4 ml-8 rd-[100vw_0_0_100vw] font-size-8"},{default:n(()=>[c("訂單 ")]),_:1})]),e("li",null,[t(s(l),{to:"/admin/coupons",class:"block px-8 py-4 ml-8 rd-[100vw_0_0_100vw] font-size-8"},{default:n(()=>[c("優惠券 ")]),_:1})]),e("li",z,[t(s(l),{to:"/",class:"block px-8 py-4 ml-8 font-size-4"},{default:n(()=>[c("回前台 ")]),_:1})]),e("li",null,[e("a",{href:"#",class:"block px-8 ml-8 font-size-4",onClick:R(o,["prevent"])},"登出")])])]))}},I=x(D,[["__scopeId","data-v-b3a71f2e"]]);var S={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payzoom",BASE_URL:"/GDiner/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const C={class:"grid grid-cols-[20rem_1fr] gap-2 h-screen"},$={key:0},O={__name:"AdminLayout",setup(v){const{VITE_URL:i}=S,r=h(),o=g(!1);function a(){var _;const u=(_=document.cookie.split("; ").find(k=>k.startsWith("myToken=")))==null?void 0:_.split("=")[1];f.defaults.headers.common.Authorization=u,f.post(`${i}/v2/api/user/check`).then(()=>{o.value=!0}).catch(()=>{o.value=!0,m.fire({title:"請重新登入",icon:"error",didClose:()=>{r.push("/login")}})})}return E(()=>{a()}),(u,_)=>(d(),p(y,null,[t(s(T),{active:!o.value,"full-page":!0},null,8,["active"]),e("div",C,[t(I),o.value?(d(),p("div",$,[t(s(b))])):V("",!0)])],64))}};export{O as default};
