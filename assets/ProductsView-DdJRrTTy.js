import{_ as O,r as c,a as G,b as H,c as J,o as K,w as B,D as Q,e as W,g as a,j as S,q as X,h as e,m as d,E as x,l as u,v as q,G as Y,t as _,F as C,B as T,x as k,i as R,C as Z,S as ee,f as n,L as te,k as se,n as oe,z as le,A as re}from"./index-BrG9BiK3.js";var ae={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payzoom",BASE_URL:"/GDiner/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const r=w=>(le("data-v-cc2a6554"),w=w(),re(),w),ne={class:"container px-4 lg:px-12.5"},ie=r(()=>e("h2",{class:"mb-10 py-6 font-size-10 md:mb-16 md:font-size-15"},"料理",-1)),ue={class:"flex flex-wrap items-center justify-between mb-6"},ce={action:"",class:"flex items-center gap-2 sm:gap-4"},de={class:"relative"},pe=r(()=>e("summary",{class:"flex list-none text-primary-light cursor-pointer hover:underline hover:underline-offset-4"},[e("span",{class:"text-primary-light hover:text-primary"},"分類"),e("div",{class:"i-material-symbols:keyboard-arrow-down"})],-1)),ve={class:"absolute top-10 left-[-40px] sm:left-[-1.2rem] z-2 w-80 rd-4 customBorder rd-2 bg-secondary"},he=r(()=>e("span",null,"0 已選取",-1)),fe={class:"px-5 py-1"},_e={for:"主食",class:"relative flex gap-3 py-2.5 lh-tight cursor-pointer"},me={for:"沙拉",class:"relative flex gap-3 py-2.5 lh-tight cursor-pointer"},be={for:"湯品",class:"relative flex gap-3 py-2.5 lh-tight cursor-pointer"},ye={for:"副食",class:"relative flex gap-3 py-2.5 lh-tight cursor-pointer"},ge={for:"甜點",class:"relative flex gap-3 py-2.5 lh-tight cursor-pointer"},xe={for:"飲料",class:"relative flex gap-3 py-2.5 lh-tight cursor-pointer"},ke={for:"套餐",class:"relative flex gap-3 py-2.5 lh-tight cursor-pointer"},we={class:"relative"},ze=r(()=>e("summary",{class:"flex list-none text-primary-light hover:cursor-pointer hover:underline hover:underline-offset-4"},[e("span",{class:"text-primary-light hover:text-primary"},"價格"),e("div",{class:"i-material-symbols:keyboard-arrow-down"})],-1)),Ce={class:"absolute top-10 left-[-120px] sm:left-[-1.2rem] z-2 w-80 rd-4 customBorder rd-2 bg-secondary"},Ve=r(()=>e("span",null,"價格範圍",-1)),$e={class:"flex items-center p-5"},Pe=r(()=>e("span",{class:"me-1"},"$",-1)),Te={class:"price-group"},Re=r(()=>e("label",{for:"lowPrice"},"最低價",-1)),Ue=r(()=>e("span",{class:"ms-5 me-1"},"$",-1)),Le={class:"price-group"},Be=r(()=>e("label",{for:"highPrice"},"最高價",-1)),Se=r(()=>e("option",{value:"最高價格"},"最高價格",-1)),qe=r(()=>e("option",{value:"最低價格"},"最低價格",-1)),Ee=r(()=>e("option",{value:"最新",selected:""},"最新",-1)),De=r(()=>e("option",{value:"最舊"},"最舊",-1)),Ie=[Se,qe,Ee,De],Me={class:"ms-auto"},Ne={key:0,class:"flex gap-4 mb-6"},je=["onClick"],Ae=r(()=>e("div",{class:"i-material-symbols:close"},null,-1)),Fe=r(()=>e("div",{class:"i-material-symbols:close"},null,-1)),Oe=r(()=>e("div",{class:"i-material-symbols:close"},null,-1)),Ge={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},He={class:"card"},Je={class:"card-image"},Ke=["src","alt"],Qe={class:"mb-4 tracking-wider"},We={class:"pb-4"},Xe={key:0},Ye={key:1},Ze={class:"text-red me-2"},et={class:"text-gray-400 font-size-3"},tt={key:1},st=r(()=>e("h3",{class:"pt-10 font-size-6 text-center"},[u("很抱歉，沒有符合條件的商品。"),e("br"),u("(〒︿〒)")],-1)),ot=[st],lt={key:1,class:"mb-12"},rt={role:"navigation","aria-label":"Pagination"},at={class:"flex justify-center font-size-5 fw-bold"},nt={key:0},it=r(()=>e("div",{class:"i-ic:round-keyboard-arrow-left"},null,-1)),ut=[it],ct=["onClick"],dt={key:1},pt=r(()=>e("div",{class:"i-ic:round-keyboard-arrow-right"},null,-1)),vt=[pt],ht={__name:"ProductsView",setup(w){const{VITE_URL:E,VITE_PATH:D}=ae,V=c(!1),I=c(),y=c("最新"),l=c([]),m=c(),b=c(),g=c(""),p=c(""),v=G(),M=H(),i=c({current:1,total:0}),z=c([]),h=J(()=>{let o=[];return l.value.length>0?o=z.value.filter(t=>l.value.includes(t.category)):o=z.value,m.value>0&&(o=o.filter(t=>t.price>=m.value)),b.value>0&&(o=o.filter(t=>t.price<=b.value)),y.value==="最新"&&(o=o.sort((t,f)=>f.created-t.created)),y.value==="最舊"&&(o=o.sort((t,f)=>t.created-f.created)),y.value==="最高價格"&&(o=o.sort((t,f)=>f.price-t.price)),y.value==="最低價格"&&(o=o.sort((t,f)=>t.price-f.price)),p.value&&(o=o.filter(t=>t.title.includes(p.value))),o});function N(){V.value=!0,Z.get(`${E}/v2/api/${D}/products/all`).then(o=>{z.value=o.data.products}).catch(o=>{ee.fire({title:"錯誤發生",icon:"error",text:`${o.response.data.message}，請嘗試重新整理，如果此狀況持續發生，請聯絡我們`,confirmButtonColor:"#3D081B"})}).finally(()=>{V.value=!1})}function j(o){const t=l.value.indexOf(o);l.value.splice(t,1)}function U(){l.value=[]}function $(){m.value=null,b.value=null,g.value=""}function L(){p.value="",M.push("/products")}function A(){U(),$(),L()}function P(o){typeof o=="number"?i.value.current=o:o==="+"?i.value.current++:i.value--,window.scrollTo({top:0})}return K(()=>{v.query.category&&l.value.push(v.query.category),v.query.sort&&(y.value=v.query.sort),v.query.search&&(p.value=v.query.search),N()}),B(()=>v.query,()=>{v.query.search&&(p.value=v.query.search)}),Q(()=>{let o=m.value,t=b.value;(m.value==null||m.value==null)&&(o=""),(b.value==null||b.value==null)&&(t=""),o==""&&t==""?g.value="":g.value=`${o} ~ ${t}`}),B(()=>h.value,()=>{console.log(h.value.length),i.value.total=Math.ceil(h.value.length/12),i.value.current=1},{deep:!0}),(o,t)=>{const f=W("RouterLink");return n(),a(C,null,[S(X(te),{active:V.value},null,8,["active"]),e("div",ne,[ie,e("div",ue,[e("form",ce,[e("details",de,[pe,e("div",ve,[e("div",{class:"flex justify-between px-5 py-4 border-b-1 border-solid border-primary-200"},[he,e("button",{type:"button",class:"bg-transparent border-0 underline underline-offset-4 tracking-widest hover:cursor-pointer hover:decoration-2",onClick:U}," 重置 ")]),e("ul",fe,[e("li",null,[e("label",_e,[d(e("input",{type:"checkbox",id:"主食",value:"主食","onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),class:"appearance-none m-0 size-5 rd-1 cursor-pointer"},null,512),[[x,l.value]]),u(" 主食 ")])]),e("li",null,[e("label",me,[d(e("input",{type:"checkbox",id:"沙拉",value:"沙拉","onUpdate:modelValue":t[1]||(t[1]=s=>l.value=s),class:"appearance-none m-0 size-5 rd-1 cursor-pointer"},null,512),[[x,l.value]]),u(" 沙拉 ")])]),e("li",null,[e("label",be,[d(e("input",{type:"checkbox",id:"湯品",value:"湯品","onUpdate:modelValue":t[2]||(t[2]=s=>l.value=s),class:"appearance-none m-0 size-5 rd-1 cursor-pointer"},null,512),[[x,l.value]]),u(" 湯品 ")])]),e("li",null,[e("label",ye,[d(e("input",{type:"checkbox",id:"副食",value:"副食","onUpdate:modelValue":t[3]||(t[3]=s=>l.value=s),class:"appearance-none m-0 size-5 rd-1 cursor-pointer"},null,512),[[x,l.value]]),u(" 副食 ")])]),e("li",null,[e("label",ge,[d(e("input",{type:"checkbox",id:"甜點",value:"甜點","onUpdate:modelValue":t[4]||(t[4]=s=>l.value=s),class:"appearance-none m-0 size-5 rd-1 cursor-pointer"},null,512),[[x,l.value]]),u(" 甜點 ")])]),e("li",null,[e("label",xe,[d(e("input",{type:"checkbox",id:"飲料",value:"飲料","onUpdate:modelValue":t[5]||(t[5]=s=>l.value=s),class:"appearance-none m-0 size-5 rd-1 cursor-pointer"},null,512),[[x,l.value]]),u(" 飲料 ")])]),e("li",null,[e("label",ke,[d(e("input",{type:"checkbox",id:"套餐",value:"套餐","onUpdate:modelValue":t[6]||(t[6]=s=>l.value=s),class:"appearance-none m-0 size-5 rd-1 cursor-pointer"},null,512),[[x,l.value]]),u(" 套餐 ")])])])])]),e("details",we,[ze,e("div",Ce,[e("div",{class:"flex justify-between px-5 py-4 border-b-1 border-solid border-primary-200"},[Ve,e("button",{type:"button",class:"bg-transparent border-0 underline underline-offset-4 tracking-widest hover:cursor-pointer hover:decoration-2",onClick:$}," 重置 ")]),e("div",$e,[Pe,e("div",Te,[d(e("input",{type:"number",id:"lowPrice","onUpdate:modelValue":t[7]||(t[7]=s=>m.value=s),class:"w-100%",placeholder:"最低價",min:"0"},null,512),[[q,m.value,void 0,{trim:!0}]]),Re]),Ue,e("div",Le,[d(e("input",{type:"number",id:"highPrice","onUpdate:modelValue":t[8]||(t[8]=s=>b.value=s),class:"w-100%",placeholder:"最高價",min:"0"},null,512),[[q,b.value,void 0,{trim:!0}]]),Be])])])]),e("div",null,[d(e("select",{name:"sortBy",id:"sortBy",onChange:t[9]||(t[9]=(...s)=>o.sortProduct&&o.sortProduct(...s)),"onUpdate:modelValue":t[10]||(t[10]=s=>y.value=s),class:"bg-transparent border-0 cursor-pointer font-size-4",ref:"sortRef"},Ie,544),[[Y,y.value]])])]),e("span",Me,_(h.value.length===z.value.length?`${h.value.length} 項料理`:`${h.value.length} 項料理`),1)]),l.value.length!==0||g.value!==""||p.value!==""?(n(),a("div",Ne,[(n(!0),a(C,null,T(l.value,s=>(n(),a("button",{type:"button",class:"flex items-center gap-0.5 px-2 py-1 bg-transparent border-1px border-solid border-primary-200 rd-6 font-size-3 cursor-pointer",key:s,onClick:F=>j(s)},[u(_(s)+" ",1),Ae],8,je))),128)),g.value!==""?(n(),a("button",{key:0,type:"button",class:"flex items-center gap-0.5 px-2 py-1 bg-transparent border-1px border-solid border-primary-200 rd-6 font-size-3 cursor-pointer",onClick:$},[u(_(g.value)+" ",1),Fe])):k("",!0),p.value!==""?(n(),a("button",{key:1,type:"button",class:"flex items-center gap-0.5 px-2 py-1 bg-transparent border-1px border-solid border-primary-200 rd-6 font-size-3 cursor-pointer",onClick:L},[u(_(p.value)+" ",1),Oe])):k("",!0),e("button",{type:"button",onClick:A,class:"bg-transparent border-0 font-size-3 underline underline-offset-4 cursor-pointer hover:decoration-2"}," 清除全部 ")])):k("",!0),e("div",{class:"relative min-h-100 mb-12",ref_key:"productsListRef",ref:I},[h.value.length>0?(n(),a("ul",Ge,[(n(!0),a(C,null,T(h.value.slice(12*(i.value.current-1),12*i.value.current),s=>(n(),a("li",{key:s.id,"data-aos":"fade-up","data-aos-delay":500,"data-aos-offset":"0"},[e("div",He,[S(f,{to:`/product/${s.id}`,class:"block"},{default:se(()=>[e("div",Je,[e("img",{src:s.imageUrl,alt:`${s.title}的圖片`,class:"block w-100% h-150px sm:h-350px md:h-300px"},null,8,Ke)]),e("h3",Qe,_(s.title),1),e("div",We,[s.price==s.origin_price?(n(),a("div",Xe,[e("span",null,"NT$ "+_(s.price),1)])):(n(),a("div",Ye,[e("span",Ze,"NT$ "+_(s.price),1),e("del",et,"NT$ "+_(s.origin_price),1)]))])]),_:2},1032,["to"])])]))),128))])):h.value.length===0&&(l.value.length!==0||g.value!==""||p.value!=="")?(n(),a("div",tt,ot)):k("",!0)],512),i.value.total>1?(n(),a("div",lt,[e("nav",rt,[e("ul",at,[i.value.current!==1?(n(),a("li",nt,[e("a",{href:"#",class:"block px-2 fw-400",onClick:t[11]||(t[11]=R(s=>P("-"),["prevent"]))},ut)])):k("",!0),(n(!0),a(C,null,T(i.value.total,s=>(n(),a("li",{key:`${s}+123`,class:oe({"underline underline-offset-6 decoration-2 pointer-events-none":s==i.value.current})},[e("a",{href:"#",class:"block px-4",onClick:R(F=>P(s),["prevent"])},_(s),9,ct)],2))),128)),i.value.current!==i.value.total?(n(),a("li",dt,[e("a",{href:"#",class:"block px-2 fw-400",onClick:t[12]||(t[12]=R(s=>P("+"),["prevent"]))},vt)])):k("",!0)])])])):k("",!0)])],64)}}},_t=O(ht,[["__scopeId","data-v-cc2a6554"]]);export{_t as default};
